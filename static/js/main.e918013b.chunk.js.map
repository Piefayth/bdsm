{"version":3,"sources":["utils.js","global.js","dungeonUtils.js","data sync /^/.//season_.*/.json$","data sync /^/.//season_.*//items//passive_items/.json$","data sync /^/.//season_.*//items//energy_items/.json$","data sync /^/.//season_.*//mobs//summon_templates/.json$","data.js","components/Dropdown.js","items.js","character.js","battle.js","simulator.js","test.js","components/ItemDropdown.js","components/PlayerForm.js","components/Simulator.js","App.js","index.js"],"names":["format","args","arguments","replace","match","number","index","parseInt","log","global","toLog","console","push","extend","iterable1","iterable2","sum","iterable","key","total","i","currentValue","withProbability","p","Math","random","pickRandom","weightKey","r","floor","weight","pickRandomWithinRange","lower","upper","deepCopyJson","obj","JSON","parse","stringify","verbose","setVerbose","val","output","setOutput","season","setSeason","formatDescriptionWithTier","description","tier","re","current","m","eval","parseMonuments","input","monumentLevels","split","matches","parsePlayer","player","username","items","line","matchUsername","matchItem","name","_mutateTemplate","template","scale","base","scaling","getScaledTemplate","utils","processedInitCharacter","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","MOBS_BY_SEASON","ITEMS_BY_SEASON","ITEM_NAMES_BY_SEASON","TEMPLATES_BY_SEASON","getItems","passive","require","energy","Dropdown","props","value","selectedOption","onChange","options","option","ABILITY_FOR_ITEM","params","phase","enemyTeam","item","target","takeDamage","source","character","amount","battle","changeSpeed","_throwInvalidPhaseError","damageFinal","round","damageBase","allyTeam","length","c","summoned","changeHp","changeAttack","allyTeamIndex","summonedChicken","addSummonToTeam","activeTeamIndex","ally","currentTarget","changeEnergy","hp","Infinity","charcter","attackIncrease","changeHpMax","hpMax","damage","teams","getTeamOf","poison","max","enemy","missingHpProportion","addedEnergy","useItemAbility","data","originalEnergy","cost","_checkEnergy","_extractParam","param","defaultValue","Character","this","speed","attackLow","attackHigh","angelAvailable","canBeSaved","_preprocessTriggers","allItems","triggers","triggerTypes","triggerType","originalHpMax","originalHp","min","originalSpeed","originalAttackLow","originalAttackHigh","amountToGain","phaseParams","triggerPhase","assign","prototype","toString","Battle","team1","team2","initTeams","allCharacters","addCopyOfCharacterToTeam","teamIndex","originalName","copyNum","toAdd","addCharacterToTeam","summon","dungeonUtils","team","pos","position","_findPositionWithinTeam","splice","kill","teamHasLost","teamlength","activeCharacter","activeName","defendingTeam","changeAllEnergy","checkAllHp","targetParams","blockParams","preDamageParams","runDungeon","waves","currTeam","wave","tick","outputTest","players","selectedDungeon","numRuns","toEquip","monuments","Health","Speed","Power","Angel","dungeon","dungeonsForSeason","j","numWins","winsForTeam0","simulator","join","ItemDropdown","itemNames","obtainableItems","unobtainableItems","type","obtainable","sort","getAllItemNamesAndBlank","event","onItemChanged","PlayerForm","useState","setItems","setMonuments","onPlayerChanged","newItems","newMonuments","checked","Simulator","dungeonList","dungeonsBySeason","reverse","setNumRuns","setSelectedDungeon","outputText","setOutputText","getInitialPlayer","setPlayers","newPlayers","onClick","style","whiteSpace","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e918013b.chunk.js","sourcesContent":["import * as global from './global.js'\r\n\r\nexport function format() {\r\n  const args = arguments;\r\n  return args[0].replace(/{(\\d+)}/g, function(match, number) {\r\n      const index = parseInt(number) + 1;\r\n      return typeof[args[index]] !== 'undefined'\r\n        ? args[index]\r\n        : match;\r\n  });\r\n}\r\n\r\nexport function log() {\r\n  if (!global.verbose && global.output === null) {\r\n    return;\r\n  }\r\n  const toLog = typeof arguments[0] === 'string'\r\n      ? format(...arguments)\r\n      : arguments[0];\r\n  if (global.verbose) {\r\n    console.log(toLog);\r\n  }\r\n  if (global.output !== null) {\r\n    global.output.push(toLog);\r\n  }\r\n}\r\n\r\nexport function extend(iterable1, iterable2) {\r\n  for (const index in iterable2) {\r\n    iterable1.push(iterable2[index]);\r\n  }\r\n}\r\n\r\nexport function all(iterable, condition) {\r\n  return iterable.reduce((accumulator, currentValue) => {\r\n    return accumulator && condition(currentValue);\r\n  }, true);\r\n}\r\n\r\nexport function sum(iterable, key=null) {\r\n  var total = 0;\r\n  for (const i in iterable) {\r\n    const currentValue = iterable[i];\r\n    if (typeof key === 'function') {\r\n      total += key(currentValue);\r\n      continue;\r\n    }\r\n    if (key == null) {\r\n      if (typeof currentValue === 'number') {\r\n        total += currentValue;\r\n        continue;\r\n      }\r\n      total++;\r\n      continue;\r\n    }\r\n    if (key in currentValue) {\r\n      total += currentValue[key];\r\n      continue;\r\n    }\r\n    total++;\r\n  }\r\n  return total;\r\n}\r\n\r\nexport function withProbability(p) {\r\n  return Math.random() < p;\r\n}\r\n\r\nexport function pickRandom(iterable, weightKey=null) {\r\n  const total = sum(iterable, weightKey);\r\n  var r = Math.floor(Math.random() * total);\r\n\r\n  for (const key in iterable) {\r\n    var weight = 1;\r\n    if (typeof weightKey === 'function') {\r\n      weight = weightKey(iterable[key]);\r\n    } else if (weightKey != null) {\r\n      weight = iterable[key][weightKey];\r\n    }\r\n    if (r < weight) {\r\n      return iterable[key];\r\n    }\r\n    r -= weight;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function pickRandomWithinRange(lower, upper) {\r\n  return lower + Math.floor(Math.random() * (upper - lower + 1));\r\n}\r\n\r\nexport function deepCopyJson(obj) {\r\n  return JSON.parse(JSON.stringify(obj));\r\n}\r\n","export var verbose = false;\r\nexport function setVerbose(val) {\r\n  verbose = val;\r\n}\r\n\r\nexport var output = null;\r\nexport function setOutput(val) {\r\n  output = val;\r\n}\r\n\r\nexport var season = 3;\r\nexport function setSeason(val) {\r\n  season = val;\r\n}\r\n","import * as utils from './utils.js';\n\nexport function formatDescriptionWithTier(description, tier) {\n  const re = /\\{([\\dt+\\-*]+)\\}/;\n  var current = description;\n  var m = current.match(re);\n  while (m != null) {\n    current = current.replace(\n        m[0],\n        eval(m[1].replace('t', tier))\n    );\n    m = current.match(re);\n  }\n  return current;\n}\n\nexport function parseMonuments(input) {\n  const monumentLevels = {};\n  for (const line of input.split('\\n')) {\n    const matches = line.match(/\\|\\s*(Health|Power|Speed)\\s*\\|\\s*(\\d+)\\s*\\|/);\n    if (matches === null) {\n      continue;\n    }\n    monumentLevels[matches[1]] = parseInt(matches[2]);\n  }\n  return monumentLevels;\n}\n\nexport function parsePlayer(input) {\n  const player = {username: '', items: []};\n  for (const line of input.split('\\n')) {\n    const matchUsername = line.match(/(.*)'s Inventory/);\n    const matchItem = line.match(/:[^\\s]+:\\s+(.*)\\s+(\\d+):/);\n    if (matchUsername !== null) {\n      player.username = matchUsername[1];\n    }\n    if (matchItem !== null) {\n      player.items.push({name: matchItem[1], tier: parseInt(matchItem[2])});\n    }\n  }\n  return player;\n}\n\nfunction _mutateTemplate(template, scale) {\n  if (typeof template != 'object') {\n    return template;\n  }\n\n  if ('base' in template && 'scaling' in template) {\n    return template.base + template.scaling * scale;\n  }\n\n  // recursive check\n  for (const key in template) {\n    template[key] = _mutateTemplate(template[key], scale);\n  }\n  return template;\n}\n\nexport function getScaledTemplate(template, scale) {\n  const obj = utils.deepCopyJson(template);\n  _mutateTemplate(obj, scale);\n  obj.processedInitCharacter = false;\n  return obj;\n}\n","var map = {\n\t\"./season_2/items/energy_items.json\": 13,\n\t\"./season_2/items/passive_items.json\": 14,\n\t\"./season_2/mobs/dungeon_0.json\": 26,\n\t\"./season_2/mobs/dungeon_1.json\": 27,\n\t\"./season_2/mobs/dungeon_10.json\": 28,\n\t\"./season_2/mobs/dungeon_2.json\": 29,\n\t\"./season_2/mobs/dungeon_3.json\": 30,\n\t\"./season_2/mobs/dungeon_4.json\": 31,\n\t\"./season_2/mobs/dungeon_5.json\": 32,\n\t\"./season_2/mobs/dungeon_6.json\": 33,\n\t\"./season_2/mobs/dungeon_7.json\": 34,\n\t\"./season_2/mobs/dungeon_8.json\": 35,\n\t\"./season_2/mobs/dungeon_9.json\": 36,\n\t\"./season_2/mobs/summon_templates.json\": 15,\n\t\"./season_3/items/energy_items.json\": 16,\n\t\"./season_3/items/passive_items.json\": 17,\n\t\"./season_3/mobs/dungeon_0.json\": 37,\n\t\"./season_3/mobs/dungeon_1.json\": 38,\n\t\"./season_3/mobs/dungeon_10.json\": 39,\n\t\"./season_3/mobs/dungeon_11.json\": 40,\n\t\"./season_3/mobs/dungeon_2.json\": 41,\n\t\"./season_3/mobs/dungeon_3.json\": 42,\n\t\"./season_3/mobs/dungeon_4.json\": 43,\n\t\"./season_3/mobs/dungeon_5.json\": 44,\n\t\"./season_3/mobs/dungeon_6.json\": 45,\n\t\"./season_3/mobs/dungeon_7.json\": 46,\n\t\"./season_3/mobs/dungeon_9.json\": 47,\n\t\"./season_3/mobs/summon_templates.json\": 18\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 25;","var map = {\n\t\"./season_2/items/passive_items.json\": 14,\n\t\"./season_3/items/passive_items.json\": 17\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 49;","var map = {\n\t\"./season_2/items/energy_items.json\": 13,\n\t\"./season_3/items/energy_items.json\": 16\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 50;","var map = {\n\t\"./season_2/mobs/summon_templates.json\": 15,\n\t\"./season_3/mobs/summon_templates.json\": 18\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 51;","import * as global from './global.js';\r\nimport * as utils from './utils.js';\r\n\r\nconst MOBS_BY_SEASON = {};\r\nconst ITEMS_BY_SEASON = {};\r\nconst ITEM_NAMES_BY_SEASON = {};\r\nconst TEMPLATES_BY_SEASON = {};\r\n\r\nexport function getDungeon(season, dungeon) {\r\n  if (!(season in MOBS_BY_SEASON)) {\r\n    MOBS_BY_SEASON[season] = {};\r\n  }\r\n  const dungeonsForSeason = MOBS_BY_SEASON[season];\r\n\r\n  if (!(dungeon in dungeonsForSeason)) {\r\n    const waves = require(\r\n        './data/season_' + season + '/mobs/dungeon_' + dungeon + '.json');\r\n    for (const i in waves) {\r\n      const wave = waves[i];\r\n      for (const j in wave) {\r\n        const character = wave[j];\r\n        if ('_stats' in character) {\r\n          delete character['_stats'];\r\n        }\r\n      }\r\n    }\r\n    dungeonsForSeason[dungeon] = waves;\r\n  }\r\n\r\n  return dungeonsForSeason[dungeon];\r\n}\r\n\r\nexport function getDungeonList() {\r\n  const dungeonsBySeason = require('./data/dungeons.json');\r\n  const dungeonList = [];\r\n\r\n  const keys = Object.keys(dungeonsBySeason);\r\n  keys.sort().reverse();\r\n  for (const season of keys) {\r\n    for (const dungeon of dungeonsBySeason[season]) {\r\n      dungeonList.push(JSON.stringify([parseInt(season), dungeon]));\r\n    }\r\n  }\r\n  return dungeonList;\r\n}\r\n\r\nexport function getItems() {\r\n  if (!(global.season in ITEMS_BY_SEASON)) {\r\n    ITEMS_BY_SEASON[global.season] = {\r\n      passive: require(\r\n          './data/season_' + global.season + '/items/passive_items.json'),\r\n      energy: require(\r\n          './data/season_' + global.season + '/items/energy_items.json')\r\n    };\r\n  }\r\n  return ITEMS_BY_SEASON[global.season];\r\n}\r\n\r\nexport function getAllItemNamesAndBlank() {\r\n  if (!(global.season in ITEM_NAMES_BY_SEASON)) {\r\n    const items = getItems();\r\n    const itemNames = [''];\r\n    const obtainableItems = [];\r\n    const unobtainableItems = [];\r\n    for (const type of ['energy', 'passive']) {\r\n      for (const item in items[type]) {\r\n        if (items[type][item].obtainable) {\r\n          obtainableItems.push(item);\r\n          continue;\r\n        }\r\n        unobtainableItems.push(item);\r\n      }\r\n    }\r\n    obtainableItems.sort();\r\n    unobtainableItems.sort();\r\n    utils.extend(itemNames, obtainableItems);\r\n    utils.extend(itemNames, unobtainableItems);\r\n    ITEM_NAMES_BY_SEASON[global.season] = itemNames;\r\n  }\r\n  return ITEM_NAMES_BY_SEASON[global.season];\r\n}\r\n\r\nexport function getTemplates() {\r\n  if (!(global.season in TEMPLATES_BY_SEASON)) {\r\n    TEMPLATES_BY_SEASON[global.season] = require(\r\n        './data/season_' + global.season + '/mobs/summon_templates.json');\r\n  }\r\n  return TEMPLATES_BY_SEASON[global.season];\r\n}\r\n","function Dropdown(props) {\r\n  return (\r\n    <select value={props.selectedOption} onChange={props.onChange}>\r\n      {props.options.map((option) => <option key={option}>{option}</option>)}\r\n    </select>\r\n  );\r\n}\r\n\r\nexport default Dropdown;","import * as data from './data.js';\nimport * as utils from './utils.js';\n\nconst ABILITY_FOR_ITEM = {\n  'Avalanche': avalanche,\n  'Big Club': bigClub,\n  'Boosting Bugle': boostingBugle,\n  'Celine\\'s Chumby Chicken': celinesChumbyChicken,\n  'Challenger Arrow': challengerArrow,\n  'Chicken Dinner': chickenDinner,\n  'Cleansing Flames': cleansingFlames,\n  'Draining Dagger': drainingDagger,\n  'Energetic Ally': energeticAlly,\n  'Explosion Powder': explosionPowder,\n  'Fire Sword': fireSword,\n  'Freezeman': freezeman,\n  'Halberd': halberd,\n  'Healing Pendant': healingPendant,\n  'Imp Whistle': impWhistle,\n  'Knight\\'s Lance': knightsLance,\n  'Love Letter': loveLetter,\n  'Machete': machete,\n  'Magic Parasol': magicParasol,\n  'Martyr Armor': martyrArmor,\n  'Pet Imp': petImp,\n  'Poison Dagger': poisonDagger,\n  'Rock Companion': rockCompanion,\n  'Rough Skin': roughSkin,\n  'Seeking Missiles': seekingMissiles,\n  'Survival Kit': survivalKit,\n  'Thorns': thorns,\n  'Trusty Steed': trustySteed,\n  'Whirlwind Axe': whirlwindAxe\n}\n\nexport function useItemAbility(params) {\n  if (params.item.name in data.getItems().energy && !_checkEnergy(params)) {\n    return;\n  }\n  return ABILITY_FOR_ITEM[params.item.name](params);\n}\n\nfunction _checkEnergy(params) {\n  const originalEnergy = params.character.energy;\n  const cost = data.getItems().energy[params.item.name].cost;\n  if (originalEnergy < cost) {\n    return false;\n  }\n  utils.log('Activating {0}', params.item.name);\n  params.character.changeEnergy({amount: -cost});\n  return true;\n}\n\nfunction _throwInvalidPhaseError(params) {\n  throw Error(utils.format('InternalError: Item {0} does not have phase {1}',\n                           params.item.name, params.phase));\n}\n\nfunction avalanche(params) {\n  switch (params.phase) {\n    case 'TurnStart': {\n      const enemyTeam = params.enemyTeam;\n      const tier = params.item.tier;\n      for (var i = 0; i < 2; i++) {\n        const target = utils.pickRandom(enemyTeam);\n        target.takeDamage({\n          source: params.character,\n          amount: utils.pickRandomWithinRange(3 * tier, 5 * tier),\n          battle: params.battle\n        });\n        target.changeSpeed({\n          amount: -utils.pickRandomWithinRange(0, tier)\n        });\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction bigClub(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PreDamage': {\n      if (!utils.withProbability(0.11 * tier)) {\n        break;\n      }\n      utils.log('Activated {0}', params.item.name);\n      params.damageFinal += Math.round(1.5 * params.damageBase);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction boostingBugle(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      const allyTeam = params.allyTeam;\n      if (allyTeam.length === 1) {\n        break;\n      }\n      for (var i = 0; i < 2; i++) {\n        const target = utils.pickRandom(\n            allyTeam,\n            (c) => {\n              if (c.summoned) {\n                return 0;\n              }\n              if (c.character === params.character.character) {\n                return 0;\n              }\n              return 1;\n            }\n        );\n        target.changeHp({amount: tier + tier});\n        target.changeAttack({amount: tier});\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction celinesChumbyChicken(params) {\n  switch (params.phase) {\n    case 'TurnStart': {\n      const allyTeamIndex = params.allyTeamIndex;\n      if (params.character.character in params.battle.summonedChicken) {\n        break;\n      }\n      params.battle.summonedChicken[params.character.character] = 0;\n      params.battle.addSummonToTeam(params.item, allyTeamIndex);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction challengerArrow(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      const enemyTeam = params.enemyTeam;\n      const target = utils.pickRandom(enemyTeam);\n      target.takeDamage({\n          source: params.character,\n          amount: 10 * tier,\n          battle: params.battle\n      });\n      params.character.changeAttack({amount: tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction chickenDinner(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'Death': {\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\n        break;\n      }\n      for (const ally of params.allyTeam) {\n        if (ally.character === params.character.character) {\n          continue;\n        }\n        ally.changeHp({amount: tier});\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction cleansingFlames(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostDamage': {\n      const allyTeam = params.allyTeam;\n      if (!utils.withProbability(0.5)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      for (const ally of allyTeam) {\n        ally.changeHp({amount: tier});\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction drainingDagger(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostTarget': {\n      utils.log('Activating {0}', params.item.name);\n      params.currentTarget.changeAttack({amount: -tier});\n      if (utils.withProbability(0.05 * tier)) {\n        params.currentTarget.changeEnergy({amount: -1});\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction energeticAlly(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      const allyTeam = params.allyTeam;\n      var target = {hp: Infinity};\n      for (const ally of allyTeam) {\n        if (ally.hp < target.hp) {\n          target = ally;\n        }\n      }\n      if (target.hp === Infinity) {\n        throw Error('InternalError: Ally team has no members');\n      }\n      target.changeHp({amount: 5 * tier});\n      target.changeEnergy({amount: 20});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction explosionPowder(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      const enemyTeam = params.enemyTeam;\n      if (enemyTeam.length === 1) {\n        const target = enemyTeam[Object.keys(enemyTeam)[0]];\n        target.takeDamage({\n            source: params.charcter,\n            amount: utils.pickRandomWithinRange(10 * tier, 20 * tier),\n            battle: params.battle\n        });\n        break;\n      }\n      for (const enemy of enemyTeam) {\n        enemy.takeDamage({\n            source: params.character,\n            amount: utils.pickRandomWithinRange(5 * tier, 10 * tier),\n            battle: params.battle\n        });\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction fireSword(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostDamage': {\n      utils.log('Activating {0}', params.item.name);\n      var attackIncrease = 0;\n      for (var i = 0; i < tier; i++) {\n        if (!utils.withProbability(0.3)) {\n          continue;\n        }\n        attackIncrease++;\n      }\n      params.character.changeAttack({amount: attackIncrease});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction freezeman(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      params.character.changeSpeed({amount: tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction halberd(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      params.character.changeAttack({amount: tier + tier});\n      params.character.changeHpMax({amount: 4 * tier});\n      params.character.changeHp({amount: 4 * tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction healingPendant(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      if (!utils.withProbability(0.5)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      params.character.changeHp({amount: 5 * tier});\n      break;\n    }\n    case 'Block': {\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\n        break;\n      }\n      if (params.currentTarget.hp < params.character.hp) {\n        utils.log(\n            '{0} blocks for {1}',\n            params.character.character,\n            params.currentTarget.character\n        );\n        params.currentTarget = params.character;\n        break;\n      }\n      utils.log(\n          '{0} is a coward',\n          params.character.character,\n      );\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction impWhistle(params) {\n  switch (params.phase) {\n    case 'TurnStart': {\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction knightsLance(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      const enemyTeam = params.enemyTeam;\n      const target = utils.pickRandom(enemyTeam);\n      if (params.character.hp === params.character.hpMax) {\n        target.takeDamage({\n            source: params.character,\n            amount: utils.pickRandomWithinRange(10 * tier, 14 * tier),\n            battle: params.battle\n        });\n        break;\n      }\n      const amount = utils.pickRandomWithinRange(5 * tier, 7 * tier);\n      target.takeDamage({\n          source: params.character,\n          amount: amount,\n          battle: params.battle\n      });\n      params.character.changeHp({amount: amount});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction loveLetter(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostDamage': {\n      utils.log('Activating {0}', params.item.name);\n      const allyTeam = params.allyTeam;\n      const target = utils.pickRandom(\n          allyTeam,\n          (c) => {\n            if (c.character === params.character.character) {\n              return 0;\n            }\n            if (c.summoned) {\n              return 0;\n            }\n            return 1;\n          }\n      );\n      if (target === null) {\n        break;\n      }\n      target.changeHp({amount: tier + tier});\n      target.changeEnergy({amount: tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction machete(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostTarget': {\n      utils.log('Activating {0}', params.item.name);\n      const enemyTeam = params.enemyTeam;\n      if (enemyTeam.length === 1) {\n        break;\n      }\n      const target = utils.pickRandom(\n          enemyTeam,\n          (c) => {\n            if (c.character === params.currentTarget.character) {\n              return 0;\n            }\n            return 1;\n          }\n      );\n      target.takeDamage({\n          source: params.character,\n          amount: utils.pickRandomWithinRange(3 * tier, 4 * tier),\n          battle: params.battle\n      });\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction magicParasol(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'Block': {\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\n        break;\n      }\n      if (params.currentTarget.hp < params.character.hp) {\n        utils.log(\n            '{0} blocks for {1}',\n            params.character.character,\n            params.currentTarget.character\n        );\n        params.currentTarget = params.character;\n        break;\n      }\n      utils.log(\n          '{0} is a coward',\n          params.character.character,\n      );\n      break;\n    }\n    case 'EnemyDamage': {\n      if (!utils.withProbability(0.05 + 0.05 * tier)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      params.damage = 0;\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction martyrArmor(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'EnemyDamage': {\n      if (!utils.withProbability(0.66)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      const target = utils.pickRandom(\n          params.battle.teams[\n              params.battle.getTeamOf[params.character.character]\n          ],\n          (c) => {\n            if (c.character === params.character.character) {\n              return 0;\n            }\n            if (c.summoned) {\n              return 0;\n            }\n            return 1;\n          }\n      );\n      if (target === null) {\n        break;\n      }\n      target.changeHp({amount: tier + tier});\n      target.changeEnergy({amount: tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction petImp(params) {\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction poisonDagger(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PostTarget': {\n      utils.log('Activating {0}', params.item.name);\n      params.currentTarget.poison += tier;\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction rockCompanion(params) {\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction roughSkin(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'EnemyDamage': {\n      if (!utils.withProbability(0.5)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      params.damage = Math.max(0, params.damage - tier - tier);\n      params.source.changeHp({amount: -tier - tier});\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction seekingMissiles(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'Target': {\n      var target = {hp: Infinity};\n      for (const enemy of params.enemyTeam) {\n        if (enemy.hp < target.hp) {\n          target = enemy;\n        }\n      }\n      if (target.hp === Infinity) {\n        throw Error('InternalError: No target in enemy team');\n      }\n      utils.log('{0} selected target {1}', params.item.name, target.character);\n      params.currentTarget = target;\n      break;\n    }\n    case 'PreDamage': {\n      const missingHpProportion =\n          1 - params.currentTarget.hp / params.currentTarget.hpMax;\n      utils.log('Activating {0}', params.item.name);\n      params.damageFinal += Math.floor(5 * missingHpProportion * tier);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction survivalKit(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      const amount = 20 * tier;\n      params.character.changeHpMax({amount: amount});\n      params.character.changeHp({amount: amount});\n      break;\n    }\n    case 'Block': {\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\n        break;\n      }\n      if (params.currentTarget.hp < params.character.hp) {\n        utils.log(\n            '{0} blocks for {1}',\n            params.character.character,\n            params.currentTarget.character\n        );\n        params.currentTarget = params.character;\n        break;\n      }\n      utils.log(\n          '{0} is a coward',\n          params.character.character,\n      );\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction thorns(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'TurnStart': {\n      utils.log('Activating {0}', params.item.name);\n      var addedEnergy = false;\n      for (const enemy of params.enemyTeam) {\n        enemy.takeDamage({\n            source: params.character,\n            amount: tier,\n            battle: params.battle\n        });\n        if (addedEnergy) {\n          continue;\n        }\n        if (!utils.withProbability(0.25)) {\n          continue;\n        }\n        params.character.changeEnergy({amount: tier});\n        addedEnergy = true;\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction trustySteed(params) {\n  switch (params.phase) {\n    case 'InitCharacter': {\n      utils.log('Activating {0}', params.item.name);\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n\nfunction whirlwindAxe(params) {\n  const tier = params.item.tier;\n  switch (params.phase) {\n    case 'PreDamage': {\n      if (!utils.withProbability(0.11 * tier)) {\n        break;\n      }\n      utils.log('Activating {0}', params.item.name);\n      for (const enemy of params.enemyTeam) {\n        if (enemy.character === params.currentTarget.character) {\n          continue;\n        }\n        enemy.takeDamage({\n            source: params.character,\n            amount: params.damageBase,\n            battle: params.battle\n        });\n      }\n      break;\n    }\n    default: {\n      _throwInvalidPhaseError(params);\n    }\n  }\n}\n","import * as data from './data.js';\nimport * as items from './items.js';\nimport * as utils from './utils.js';\n\nfunction _extractParam(params, param, defaultValue) {\n  if (param in params) {\n    return params[param];\n  }\n  return defaultValue;\n}\n\nexport class Character {\n  constructor(params) {\n    this.character = _extractParam(params, 'character', 'Unknown');\n    this.hpMax = _extractParam(params, 'hpMax', 100);\n    this.hp = _extractParam(params, 'hp', this.hpMax);\n    this.speed = _extractParam(params, 'speed', 10);\n    this.attackLow = _extractParam(params, 'attackLow', 1);\n    this.attackHigh = _extractParam(params, 'attackHigh', 10);\n    this.energy = _extractParam(params, 'energy', 0);\n    this.summoned = _extractParam(params, 'summoned', false);\n    this.items = _extractParam(params, 'items', []);\n\n    this.angelAvailable = _extractParam(params, 'angelAvailable', false);\n    this.canBeSaved = _extractParam(params, 'canBeSaved', true);\n    this.poison = _extractParam(params, 'poison', 0);\n    this._preprocessTriggers();\n    this.processedInitCharacter =\n        _extractParam(params, 'processedInitCharacter', true);\n  }\n\n  _preprocessTriggers() {\n    if ('triggers' in this) {\n      return;\n    }\n    const allItems = data.getItems();\n    const triggers = {};\n    for (const item of this.items) {\n      const triggerTypes = item.name in allItems.energy\n          ? ['TurnStart']\n          : allItems.passive[item.name].triggers;\n      for (const triggerType of triggerTypes) {\n        if (!(triggerType in triggers)) {\n          triggers[triggerType] = [item];\n          continue;\n        }\n        triggers[triggerType].push(item);\n      }\n    }\n    this.triggers = triggers;\n  }\n\n  deepCopy() {\n    const params = utils.deepCopyJson(this);\n    return new Character(params);\n  }\n\n  changeHpMax(params) {\n    const originalHpMax = this.hpMax;\n    this.hpMax += params.amount;\n    utils.log('{0} max hp changed by {1}: {2} -> {3}',\n              this.character, params.amount, originalHpMax, this.hpMax);\n  }\n\n  changeHp(params) {\n    const originalHp = this.hp;\n    this.hp = Math.min(this.hp + params.amount, this.hpMax);\n    utils.log('{0} hp changed by {1}: {2} -> {3}',\n              this.character, params.amount, originalHp, this.hp);\n  }\n\n  changeSpeed(params) {\n    const originalSpeed = this.speed;\n    this.speed = Math.max(this.speed + params.amount, 1);\n    utils.log('{0} speed changed by {1}: {2} -> {3}',\n              this.character, params.amount, originalSpeed, this.speed);\n  }\n\n  changeAttack(params) {\n    const originalAttackLow = this.attackLow;\n    const originalAttackHigh = this.attackHigh;\n    const amountToGain = Math.max(-originalAttackLow, params.amount);\n    this.attackLow += amountToGain;\n    this.attackHigh += amountToGain;\n    utils.log('{0} attack changed by {1}: {2} -> {3}',\n              this.character,\n              params.amount,\n              [originalAttackLow, originalAttackHigh],\n              [this.attackLow, this.attackHigh]);\n  }\n\n  changeEnergy(params) {\n    const originalEnergy = this.energy;\n    this.energy = Math.max(this.energy + params.amount, 0);\n    utils.log('{0} energy changed by {1}: {2} -> {3}',\n              this.character,\n              params.amount,\n              originalEnergy,\n              this.energy);\n  }\n\n  takeDamage(params) {\n    const phaseParams = {\n        battle: params.battle,\n        damage: params.amount,\n        phase: 'EnemyDamage',\n        source: params.source\n    };\n    this.triggerPhase(phaseParams);\n    this.changeHp({\n        amount: -phaseParams.damage\n    });\n    if (this.hp > 0) {\n      return;\n    }\n    const allyTeamIndex = params.battle.getTeamOf[this.character];\n    this.triggerPhase({\n      allyTeam: params.battle.teams[allyTeamIndex],\n      allyTeamIndex: allyTeamIndex,\n      battle: params.battle,\n      character: this,\n      phase: 'Death'\n    });\n  }\n\n  triggerPhase(params) {\n    if (!(params.phase in this.triggers)) {\n      return;\n    }\n    if (params.phase === 'InitCharacter' && this.processedInitCharacter) {\n      return;\n    }\n\n    params.character = this;\n    for (const item of this.triggers[params.phase]) {\n      items.useItemAbility(Object.assign(params, {\n          item: item\n      }));\n    }\n    if (params.phase === 'InitCharacter') {\n      this.processedInitCharacter = true;\n    }\n  }\n}\n\nCharacter.prototype.toString = function() {\n  return this.character;\n}\n","import {Character} from './character.js';\nimport * as data from './data.js';\nimport * as utils from './utils.js';\nimport * as dungeonUtils from './dungeonUtils.js';\n\nfunction _findPositionWithinTeam(name, team) {\n  for (const position in team) {\n    const c = team[position];\n    if (c.character === name) {\n      return position;\n    }\n  }\n  return -1;\n}\n\n\nexport class Battle {\n  constructor(team1, team2) {\n    this.summonedChicken = {};\n    this.initTeams(team1, team2);\n  }\n\n  initTeams(team1, team2) {\n    this.teams = [[], []];\n    this.allCharacters = {};\n    this.getTeamOf = {};\n    for (const i in team1) {\n      this.addCopyOfCharacterToTeam(team1[i], 0);\n    }\n    for (const i in team2) {\n      this.addCopyOfCharacterToTeam(team2[i], 1);\n    }\n  }\n\n  addCharacterToTeam(character, teamIndex) {\n    var name = character.character;\n    const originalName = name;\n    var copyNum = 1;\n    while (name in this.allCharacters) {\n      copyNum++;\n      name = originalName + ' ' + copyNum;\n    }\n    character.character = name;\n    this.getTeamOf[name] = teamIndex;\n    this.allCharacters[name] = character;\n    character.triggerPhase({\n        allyTeamIndex: teamIndex,\n        battle: this,\n        character: character,\n        phase: 'InitCharacter'\n    });\n    this.teams[teamIndex].push(character);\n  }\n\n  addCopyOfCharacterToTeam(character, teamIndex) {\n    const toAdd = new Character(character);\n    this.addCharacterToTeam(toAdd, teamIndex);\n  }\n\n  addSummonToTeam(item, teamIndex) {\n    const template = data.getTemplates()[item.name];\n    const summon = new Character(dungeonUtils.getScaledTemplate(template, item.tier));\n    utils.log('Summoning {0} for team {1}', summon.character, teamIndex);\n    this.addCharacterToTeam(summon, teamIndex);\n  }\n\n  kill(character) {\n    const name = character.character;\n    if (character.angelAvailable) {\n      utils.log('reviving: {0}', name);\n      character.hp = Math.floor(character.hpMax * 0.33);\n      character.angelAvailable = false;\n      return;\n    }\n    utils.log('killing: {0}', name);\n    const team = this.teams[this.getTeamOf[name]];\n    const pos = _findPositionWithinTeam(name, team);\n    if (pos < 0) {\n      throw Error(utils.format('InternalError: {0} is not in team {1}',\n                               name, team));\n    }\n    delete this.allCharacters[name];\n    delete this.getTeamOf[name];\n    team.splice(pos, 1);\n    if (name in this.summonedChicken) {\n      delete this.summonedChicken[name];\n    }\n  }\n\n  changeAllEnergy(iterable, amount) {\n    for (const key in iterable) {\n      iterable[key].changeEnergy({amount: amount});\n    }\n  }\n\n  checkAllHp() {\n    for (const name in this.allCharacters) {\n      const character = this.allCharacters[name];\n      if (character.hp <= 0) {\n        this.kill(character);\n      }\n    }\n  }\n\n  tick() {\n    for (const i in this.teams) {\n      if (this.teamHasLost(i)) {\n        return;\n      }\n    }\n    if (this.teamlength);\n    const activeCharacter = utils.pickRandom(this.allCharacters, 'speed');\n    const activeName = activeCharacter.character;\n    utils.log('\\n{0}\\'s turn:', activeName);\n    this.activeTeamIndex = this.getTeamOf[activeName];\n    const defendingTeam = this.teams[1 - this.activeTeamIndex];\n\n    this.changeAllEnergy(this.allCharacters, 2);\n\n    activeCharacter.triggerPhase({\n        allyTeam: this.teams[this.activeTeamIndex],\n        allyTeamIndex: this.activeTeamIndex,\n        enemyTeam: defendingTeam,\n        battle: this,\n        phase: 'TurnStart'\n    });\n\n    this.checkAllHp();\n    for (const i in this.teams) {\n      if (this.teamHasLost(i)) {\n        return;\n      }\n    }\n\n    const targetParams = {\n        currentTarget: utils.pickRandom(defendingTeam),\n        enemyTeam: defendingTeam,\n        phase: 'Target'\n    };\n    activeCharacter.triggerPhase(targetParams);\n\n    var currentTarget = targetParams.currentTarget;\n    if (targetParams.currentTarget.canBeSaved) {\n      const blockParams = {\n          currentTarget: currentTarget,\n          phase: 'Block'\n      };\n      for (const defendingCharacter of defendingTeam) {\n        defendingCharacter.triggerPhase(blockParams);\n      }\n      currentTarget = blockParams.currentTarget;\n    }\n\n    activeCharacter.triggerPhase({\n        battle: this,\n        currentTarget: currentTarget, enemyTeam: defendingTeam,\n        phase: 'PostTarget'\n    });\n\n    utils.log('Main target: {0}', currentTarget.character);\n\n    const damageBase = utils.pickRandomWithinRange(\n        activeCharacter.attackLow,\n        activeCharacter.attackHigh\n    );\n    utils.log('Attack base damage: {0}', damageBase);\n\n    const preDamageParams = {\n        battle: this,\n        currentTarget: currentTarget,\n        damageBase: damageBase,\n        damageFinal: damageBase,\n        enemyTeam: defendingTeam,\n        phase: 'PreDamage'\n    };\n    activeCharacter.triggerPhase(preDamageParams);\n    if (preDamageParams.damageFinal !== damageBase) {\n      utils.log('Attack final damage: {0}', preDamageParams.damageFinal);\n    }\n\n    utils.log('Normal attack:');\n    currentTarget.takeDamage({\n        amount: preDamageParams.damageFinal,\n        battle: this,\n        source: activeCharacter\n    });\n\n    activeCharacter.triggerPhase({\n        allyTeam: this.teams[this.activeTeamIndex],\n        phase: 'PostDamage'\n    });\n\n    if (activeCharacter.poison > 0) {\n      utils.log('{0} takes poison damage', activeCharacter.character);\n      activeCharacter.changeHp({amount: -activeCharacter.poison});\n    }\n    this.checkAllHp();\n  }\n\n  teamHasLost(index) {\n    return this.teams[index].length === 0;\n  }\n}\n","import {Battle} from './battle.js';\r\nimport * as utils from './utils.js';\r\n\r\nexport function runDungeon(team, waves) {\r\n  var currTeam = team;\r\n  for (const character of currTeam) {\r\n    character.processedInitCharacter = false;\r\n  }\r\n  utils.log('\\nTeam 0: {0}', JSON.stringify(team));\r\n  utils.log('\\n\\nStarting dungeon');\r\n  for (const index in waves) {\r\n    utils.log('\\nloading wave {0}', index);\r\n    const wave = waves[index];\r\n    utils.log('Team 1: {0}', JSON.stringify(wave));\r\n    const battle = new Battle(currTeam, wave);\r\n    utils.log(utils.deepCopyJson(battle));\r\n    while (true) {\r\n      battle.tick();\r\n\r\n      utils.log(utils.deepCopyJson(battle));\r\n\r\n      if (battle.teamHasLost(0)) {\r\n        return 1;\r\n      }\r\n\r\n      if (battle.teamHasLost(1)) {\r\n        break;\r\n      }\r\n    }\r\n    currTeam = battle.teams[0];\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function runMany(team, waves, numRuns) {\r\n  var winsForTeam0 = 0;\r\n  for (var i = 0; i < numRuns; i++) {\r\n    if (runDungeon(team, waves) === 0) {\r\n      winsForTeam0++;\r\n    }\r\n  }\r\n  return winsForTeam0;\r\n}\r\n","import * as data from './data.js';\r\nimport * as global from './global.js';\r\nimport * as simulator from './simulator.js';\r\nimport * as utils from './utils.js';\r\n\r\nexport function outputTest(players, selectedDungeon, numRuns) {\r\n  const output = [];\r\n  const team = [];\r\n\r\n  for (const player of players) {\r\n    if (player.username === '') {\r\n      continue;\r\n    }\r\n    output.push(utils.format('Player found: {0}', player.username));\r\n\r\n    const toEquip = [];\r\n    for (const item of player.items) {\r\n      if (item.name === '') {\r\n        continue;\r\n      }\r\n      output.push(utils.format('Item found: {0} {1}', item.name, item.tier));\r\n      toEquip.push(item);\r\n    }\r\n    if (toEquip.length === 0) {\r\n      output.push('No items found');\r\n    }\r\n    output.push('');\r\n\r\n    team.push({\r\n      character: player.username,\r\n      hp: 100 + player.monuments.Health * 5,\r\n      hpMax: 100 + player.monuments.Health * 5,\r\n      speed: 10 + player.monuments.Speed * 1,\r\n      attackLow: 1 + player.monuments.Power * 1,\r\n      attackHigh: 10 + player.monuments.Power * 1,\r\n      energy: 0,\r\n      summoned: false,\r\n      items: toEquip,\r\n      angelAvailable: player.monuments.Angel\r\n    });\r\n  }\r\n  \r\n  const [season, dungeon] = JSON.parse(selectedDungeon);\r\n  const waves = data.getDungeon(season, dungeon);\r\n\r\n  global.setSeason(3);\r\n  global.setVerbose(false);\r\n  global.setOutput(null);\r\n  const numWins = simulator.runMany(team, waves, numRuns * 1);\r\n\r\n  output.push(utils.format('Wins out of {0} runs: {1} ({2}%)',\r\n                           numRuns, numWins, numWins * 100 / numRuns));\r\n  output.push('\\nExample Run:');\r\n  global.setOutput([]);\r\n  global.setVerbose(true);\r\n  output.push('\\nWinning team: ' + simulator.runDungeon(team, waves));\r\n  utils.extend(output, global.output);\r\n  return output.join('\\n');\r\n}\r\n","import { getAllItemNamesAndBlank } from \"../data.js\";\r\nimport Dropdown from './Dropdown.js';\r\n\r\nfunction ItemDropdown(props) {\r\n  const itemNames = getAllItemNamesAndBlank();\r\n  const itemTiers = [1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n\r\n  return (\r\n    <div>\r\n      <Dropdown\r\n        selectedOption={props.item.name}\r\n        onChange={(event) => props.onItemChanged(event.target.value, props.item.tier)}\r\n        options={itemNames}\r\n      />\r\n      <Dropdown\r\n        selectedOption={props.item.tier}\r\n        onChange={(event) => props.onItemChanged(props.item.name, event.target.value)}\r\n        options={itemTiers}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ItemDropdown;\r\n","import ItemDropdown from './ItemDropdown.js';\nimport { useState } from 'react';\n\nfunction PlayerForm(props) {\n  const [items, setItems] = useState(props.player.items);\n  const [monuments, setMonuments] = useState(props.player.monuments);\n\n  return (\n    <div>\n      Username:\n      <input onChange={(event) => {\n        props.onPlayerChanged(event.target.value, props.player.items, props.player.monuments);\n      }} />\n      {items.map((item, index) =>\n        <ItemDropdown\n          key={index}\n          item={item}\n          onItemChanged={(name, tier) => {\n            let newItems = [...items];\n            newItems[index] = {name: name, tier: parseInt(tier)};\n            setItems(newItems);\n            props.onPlayerChanged(props.player.username, newItems, props.player.monuments);\n          }}\n        />\n      )}\n      Monuments:\n      <br/>\n      Health:\n      <input type=\"number\" min={0} value={props.player.monuments.Health} onChange={(event) => {\n        let newMonuments = {...monuments};\n        newMonuments.Health = event.target.value;\n        setMonuments(newMonuments);\n        props.onPlayerChanged(\n            props.player.username,\n            props.player.items,\n            newMonuments);\n      }} />\n      &nbsp;\n      Power:\n      <input type=\"number\" min={0} value={props.player.monuments.Power} onChange={(event) => {\n        let newMonuments = {...monuments};\n        newMonuments.Power = event.target.value;\n        setMonuments(newMonuments);\n        props.onPlayerChanged(\n            props.player.username,\n            props.player.items,\n            newMonuments);\n      }} />\n      &nbsp;\n      Speed:\n      <input type=\"number\" min={0} value={props.player.monuments.Speed} onChange={(event) => {\n        let newMonuments = {...monuments};\n        newMonuments.Speed = event.target.value;\n        setMonuments(newMonuments);\n        props.onPlayerChanged(\n            props.player.username,\n            props.player.items,\n            newMonuments);\n      }} />\n      &nbsp;\n      Angel:\n      <input type=\"checkbox\" checked={props.player.monuments.Angel} onChange={(event) => {\n        let newMonuments = {...monuments};\n        newMonuments.Angel = event.target.checked;\n        setMonuments(newMonuments);\n        props.onPlayerChanged(\n            props.player.username,\n            props.player.items,\n            newMonuments);\n      }} />\n      <br/>\n      <br/>\n    </div>\n  );\n}\n\nexport default PlayerForm;\n","import * as data from '../data.js';\r\nimport Dropdown from './Dropdown.js';\r\nimport { outputTest } from '../test.js';\r\nimport PlayerForm from './PlayerForm.js';\r\nimport { useState } from 'react';\r\n\r\nfunction Simulator() {\r\n  const dungeonList = data.getDungeonList();\r\n  const [numRuns, setNumRuns] = useState(100);\r\n  const [selectedDungeon, setSelectedDungeon] = useState('[3,0]');\r\n  const [outputText, setOutputText] = useState(\"Select your items with the dropdowns.\\nClick the button to start a test run!\");\r\n  const [players, setPlayers] = useState([\r\n      getInitialPlayer(),\r\n      getInitialPlayer(),\r\n      getInitialPlayer(),\r\n      getInitialPlayer(),\r\n      getInitialPlayer()\r\n  ]);\r\n\r\n  function getInitialPlayer() {\r\n    return {\r\n      username: \"\",\r\n      items: [\r\n        getInitialItem(),\r\n        getInitialItem(),\r\n        getInitialItem(),\r\n        getInitialItem()\r\n      ],\r\n      monuments: {\r\n        Health: 0,\r\n        Power: 0,\r\n        Speed: 0,\r\n        Angel: false\r\n      }\r\n    };\r\n  }\r\n  \r\n  function getInitialItem() {\r\n    return { name: \"\", tier: 1 };\r\n  }\r\n\r\n  function onRunTest() {\r\n    const output = outputTest(players, selectedDungeon, numRuns);\r\n    setOutputText(output);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {players.map((player, index) =>\r\n        <PlayerForm\r\n          key={index}\r\n          player={player}\r\n          onPlayerChanged={(username, items, monuments) => {\r\n            let newPlayers = [...players];\r\n            newPlayers[index] = {\r\n              username: username,\r\n              items: items,\r\n              monuments: monuments\r\n            };\r\n            setPlayers(newPlayers);\r\n          }}\r\n        />\r\n      )}\r\n      [Season, Dungeon]:\r\n      <Dropdown\r\n        selectedOption={selectedDungeon}\r\n        onChange={(event) => {setSelectedDungeon(event.target.value);}}\r\n        options={dungeonList}\r\n      />\r\n      <br/>\r\n      Number of runs:\r\n      <input type=\"number\" value={numRuns} onChange={(event) => {\r\n        setNumRuns(event.target.value);\r\n      }} />\r\n      <br/>\r\n      <button onClick={onRunTest}>\r\n        Run Test\r\n      </button>\r\n      <div style={{whiteSpace: 'pre-line'}}>{outputText}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Simulator;\r\n","import Simulator from \"./components/Simulator.js\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <h1>Boxbox Dungeon SiMulator (BDSM)</h1>\r\n      <h3>The simulator has been updated with known information from Season 3!</h3>\r\n      <h3>(The pity system is currently not implemented)</h3>\r\n      <p>Enter your party's items and monuments.</p>\r\n      <br />\r\n      <Simulator />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}